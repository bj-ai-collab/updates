<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IndiGo Co-Brand Loyalty ‚Äî System Overview</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=DM+Sans:wght@300;400;500;600&family=DM+Mono:wght@400;500&family=Bebas+Neue&display=swap" rel="stylesheet">
<style>
  :root {
    --navy: #0A1931; --navy-mid: #142547; --navy-light: #1E3460;
    --red: #E8192C; --red-dark: #C0121F; --gold: #F2A900;
    --ivory: #FAF8F4; --ivory-2: #F2EFE9;
    --text-body: #1A2540; --text-muted: #6B7A99; --text-light: #9BA8C0;
    --border: rgba(10,25,49,0.10); --border-light: rgba(10,25,49,0.06);
    --success: #10B981; --warning: #F59E0B; --info: #3B82F6;
  }
  *{margin:0;padding:0;box-sizing:border-box;}
  body{background:#05090f;font-family:'DM Sans',sans-serif;overflow:hidden;height:100vh;width:100vw;color:white;}

  /* ‚îÄ‚îÄ BG ‚îÄ‚îÄ */
  .bg{position:fixed;inset:0;background:
    radial-gradient(ellipse at 18% 55%, rgba(232,25,44,0.07) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 25%, rgba(10,25,49,0.7) 0%, transparent 55%),
    linear-gradient(155deg,#05090f 0%,#0a1020 100%);}
  .grid{position:fixed;inset:0;opacity:.035;background-image:
    linear-gradient(rgba(255,255,255,1) 1px,transparent 1px),
    linear-gradient(90deg,rgba(255,255,255,1) 1px,transparent 1px);
    background-size:56px 56px;}

  /* ‚îÄ‚îÄ STAGE ‚îÄ‚îÄ */
  #stage{position:fixed;inset:0;z-index:10;}

  /* ‚îÄ‚îÄ SLIDES ‚îÄ‚îÄ */
  .slide{
    position:absolute;inset:0;display:flex;align-items:center;justify-content:center;
    opacity:0;pointer-events:none;transition:opacity .65s ease;
    padding:72px 56px 56px;gap:52px;
  }
  .slide.active{opacity:1;pointer-events:all;}

  /* ‚îÄ‚îÄ BROWSER MOCKUP ‚îÄ‚îÄ */
  .browser{
    flex-shrink:0;width:640px;border-radius:12px;overflow:hidden;
    box-shadow:0 0 0 1px rgba(255,255,255,.06),0 28px 72px rgba(0,0,0,.75),0 0 70px rgba(232,25,44,.05);
    background:var(--ivory);
    opacity:0;transform:translateX(32px);
    transition:all .75s .12s cubic-bezier(.16,1,.3,1);
  }
  .slide.active .browser{opacity:1;transform:translateX(0);}

  .chrome{background:#e3e1dc;padding:9px 13px;display:flex;align-items:center;gap:9px;border-bottom:1px solid rgba(0,0,0,.09);}
  .cdots{display:flex;gap:5px;}
  .cdot{width:10px;height:10px;border-radius:50%;}
  .cdot.r{background:#FF5F57;}.cdot.y{background:#FEBC2E;}.cdot.g{background:#28C840;}
  .cbar{
    flex:1;background:white;border-radius:5px;height:24px;display:flex;align-items:center;
    padding:0 11px;gap:7px;font-family:'DM Mono',monospace;font-size:10.5px;color:#666;
    border:1px solid rgba(0,0,0,.07);
  }
  .cbar .lock{color:var(--success);font-size:9px;}

  .bbody{height:400px;overflow:hidden;position:relative;}

  /* ‚îÄ‚îÄ APP SHELL ‚îÄ‚îÄ */
  .shell{display:flex;height:100%;font-size:11.5px;}

  .sb{width:172px;background:var(--navy);display:flex;flex-direction:column;flex-shrink:0;position:relative;overflow:hidden;}
  .sb::before{content:'';position:absolute;top:-35px;left:-35px;width:140px;height:140px;border-radius:50%;background:radial-gradient(circle,rgba(232,25,44,.14) 0%,transparent 70%);pointer-events:none;}

  .sb-logo{padding:12px 14px 11px;border-bottom:1px solid rgba(255,255,255,.06);display:flex;align-items:center;gap:7px;}
  .sb-mark{width:26px;height:26px;background:var(--red);border-radius:6px;display:flex;align-items:center;justify-content:center;font-family:'Playfair Display',serif;font-weight:700;color:white;font-size:13px;flex-shrink:0;box-shadow:0 2px 8px rgba(232,25,44,.3);}
  .sb-brand{color:white;font-family:'Playfair Display',serif;font-size:12.5px;font-weight:700;}
  .sb-sub{color:rgba(255,255,255,.3);font-size:8.5px;letter-spacing:.1em;text-transform:uppercase;}
  .sb-nav{padding:8px 7px;flex:1;}
  .sb-sec{color:rgba(255,255,255,.28);font-size:8px;font-weight:600;letter-spacing:.12em;text-transform:uppercase;padding:7px 7px 3px;}
  .sb-item{display:flex;align-items:center;gap:6px;padding:6px 7px;border-radius:5px;color:rgba(255,255,255,.52);font-size:11px;font-weight:500;cursor:default;margin-bottom:1px;position:relative;}
  .sb-item.active{background:rgba(232,25,44,.18);color:white;}
  .sb-item.active::before{content:'';position:absolute;left:0;top:50%;transform:translateY(-50%);width:3px;height:14px;background:var(--red);border-radius:0 2px 2px 0;}
  .sb-badge{margin-left:auto;background:var(--red);color:white;font-size:8.5px;font-weight:700;padding:1px 5px;border-radius:8px;}
  .sb-foot{padding:9px;border-top:1px solid rgba(255,255,255,.06);display:flex;align-items:center;gap:7px;}
  .sb-av{width:24px;height:24px;border-radius:50%;background:linear-gradient(135deg,var(--red),#FF6B6B);display:flex;align-items:center;justify-content:center;color:white;font-size:9px;font-weight:700;}
  .sb-uname{color:white;font-size:10.5px;font-weight:500;}
  .sb-role{color:rgba(255,255,255,.3);font-size:9px;}

  .main{flex:1;background:var(--ivory);display:flex;flex-direction:column;overflow:hidden;}
  .mhdr{background:rgba(250,248,244,.95);border-bottom:1px solid var(--border);padding:9px 18px;display:flex;align-items:center;justify-content:space-between;height:44px;flex-shrink:0;}
  .mtitle{font-family:'Playfair Display',serif;font-size:14px;font-weight:600;color:var(--navy);}
  .mmeta{color:var(--text-muted);font-size:10px;margin-top:1px;}
  .mbody{flex:1;overflow:hidden;padding:12px 14px;background:var(--ivory);}

  /* ‚îÄ‚îÄ REUSABLE COMPONENTS ‚îÄ‚îÄ */
  .stats-row{display:grid;grid-template-columns:repeat(4,1fr);gap:9px;margin-bottom:11px;}
  .sbox{background:white;border-radius:9px;padding:10px 12px;border:1px solid var(--border-light);box-shadow:0 1px 3px rgba(10,25,49,.05);position:relative;overflow:hidden;}
  .sbox::after{content:'';position:absolute;top:0;right:0;width:46px;height:46px;border-radius:0 0 0 46px;opacity:.055;}
  .sbox.R::after{background:var(--red);}  .sbox.N::after{background:var(--navy);}
  .sbox.G::after{background:var(--gold);} .sbox.S::after{background:var(--success);}
  .sico{width:26px;height:26px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:12px;margin-bottom:7px;}
  .sico.R{background:rgba(232,25,44,.10);} .sico.N{background:rgba(10,25,49,.08);}
  .sico.G{background:rgba(242,169,0,.12);}  .sico.S{background:rgba(16,185,129,.10);}
  .sval{font-family:'Playfair Display',serif;font-size:18px;font-weight:700;color:var(--navy);line-height:1;}
  .slbl{font-size:9px;color:var(--text-muted);margin-top:2px;font-weight:500;}
  .schg{font-size:9px;margin-top:5px;font-weight:600;display:flex;align-items:center;gap:2px;}
  .schg.up{color:var(--success);} .schg.dn{color:var(--red);}

  .twocol{display:grid;grid-template-columns:1fr 1fr;gap:9px;}
  .card{background:white;border-radius:9px;border:1px solid var(--border-light);box-shadow:0 1px 3px rgba(10,25,49,.05);overflow:hidden;}
  .card-hdr{padding:9px 12px;border-bottom:1px solid var(--border-light);display:flex;align-items:center;justify-content:space-between;}
  .card-title{font-family:'Playfair Display',serif;font-size:11.5px;font-weight:600;color:var(--navy);}

  table.t{width:100%;border-collapse:collapse;}
  table.t th{text-align:left;padding:5px 9px;font-size:8.5px;font-weight:600;letter-spacing:.06em;text-transform:uppercase;color:var(--text-muted);background:var(--ivory);border-bottom:1px solid var(--border);}
  table.t td{padding:7px 9px;font-size:10.5px;border-bottom:1px solid var(--border-light);vertical-align:middle;color:var(--text-body);}
  table.t tr:last-child td{border-bottom:none;}

  .bdg{display:inline-flex;align-items:center;gap:3px;padding:2px 7px;border-radius:20px;font-size:9px;font-weight:600;}
  .bdg::before{content:'';width:4px;height:4px;border-radius:50%;}
  .bdg.active{background:rgba(16,185,129,.10);color:var(--success);} .bdg.active::before{background:var(--success);}
  .bdg.pending{background:rgba(245,158,11,.12);color:var(--warning);} .bdg.pending::before{background:var(--warning);}
  .bdg.inactive{background:rgba(107,122,153,.12);color:var(--text-muted);} .bdg.inactive::before{background:var(--text-muted);}
  .bdg.err{background:rgba(232,25,44,.10);color:var(--red);} .bdg.err::before{background:var(--red);}
  .bdg.fin{background:rgba(10,25,49,.08);color:var(--navy);border:1px solid rgba(10,25,49,.12);}
  .bdg.fin::before{display:none;}
  .bdg.nfin{background:rgba(59,130,246,.10);color:var(--info);border:1px solid rgba(59,130,246,.15);}
  .bdg.nfin::before{display:none;}

  .chip{display:inline-block;background:var(--ivory-2);border:1px solid var(--border);border-radius:4px;padding:2px 6px;font-family:'DM Mono',monospace;font-size:9px;color:var(--navy);}

  .btn-r{background:var(--red);color:white;border:none;border-radius:5px;padding:5px 9px;font-size:9.5px;font-weight:600;font-family:'DM Sans',sans-serif;cursor:default;}
  .btn-s{background:white;color:var(--navy);border:1px solid var(--border);border-radius:5px;padding:5px 9px;font-size:9.5px;font-weight:600;font-family:'DM Sans',sans-serif;cursor:default;}

  /* health bars */
  .hrow{display:flex;align-items:center;gap:7px;margin-bottom:6px;}
  .hlbl{font-size:9.5px;color:var(--text-muted);width:118px;flex-shrink:0;}
  .hbar{flex:1;height:4px;background:var(--ivory-2);border-radius:2px;overflow:hidden;}
  .hfill{height:100%;border-radius:2px;}
  .hval{font-size:9px;font-weight:600;font-family:'DM Mono',monospace;width:30px;text-align:right;}

  /* tabs */
  .tabbar{display:flex;gap:1px;border-bottom:2px solid var(--border-light);margin-bottom:9px;}
  .tabi{padding:5px 12px;font-size:11px;font-weight:600;color:var(--text-muted);cursor:default;border-bottom:2px solid transparent;margin-bottom:-2px;}
  .tabi.active{color:var(--red);border-bottom-color:var(--red);}

  /* log rows */
  .lr{display:flex;align-items:flex-start;gap:9px;padding:6px 0;border-bottom:1px solid var(--border-light);}
  .lr:last-child{border-bottom:none;}
  .ldot{width:6px;height:6px;border-radius:50%;flex-shrink:0;margin-top:4px;}
  .ldot.s{background:var(--success);} .ldot.e{background:var(--red);} .ldot.w{background:var(--warning);}
  .ltime{font-size:9.5px;color:var(--text-muted);font-family:'DM Mono',monospace;white-space:nowrap;min-width:100px;}
  .lmsg{font-size:10.5px;color:var(--text-body);}
  .lmeta{font-size:9px;color:var(--text-muted);margin-top:1px;font-family:'DM Mono',monospace;}

  /* map rows */
  .mr{display:grid;grid-template-columns:1fr 22px 1fr 55px;gap:5px;align-items:center;padding:5px 0;border-bottom:1px solid var(--border-light);}
  .mr:last-child{border-bottom:none;}
  .marrow{text-align:center;color:var(--text-light);font-size:11px;}
  .mreq{font-size:8.5px;font-weight:600;color:var(--success);font-family:'DM Mono',monospace;}

  /* campaign card */
  .cc{background:white;border-radius:9px;border:1px solid var(--border-light);padding:10px 12px;margin-bottom:7px;box-shadow:0 1px 3px rgba(10,25,49,.05);}
  .ccname{font-family:'Playfair Display',serif;font-size:12px;font-weight:600;color:var(--navy);}
  .ccmeta{font-size:9px;color:var(--text-muted);margin-top:1px;}
  .cpbar{height:4px;background:var(--ivory-2);border-radius:2px;overflow:hidden;margin:7px 0 5px;}
  .cpfill{height:100%;background:linear-gradient(90deg,var(--red),#FF6B6B);border-radius:2px;}
  .ccfoot{display:flex;justify-content:space-between;}
  .ccstat{font-size:9px;color:var(--text-muted);}
  .ccstat strong{color:var(--navy);font-weight:600;}

  /* stepper */
  .srow{display:flex;align-items:flex-start;margin-bottom:14px;}
  .si{display:flex;flex-direction:column;align-items:center;flex:1;}
  .si:last-child{flex:none;}
  .sc{width:24px;height:24px;border-radius:50%;border:2px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:9.5px;font-weight:700;color:var(--text-muted);background:white;position:relative;z-index:1;}
  .sc.done{background:var(--navy);border-color:var(--navy);color:white;}
  .sc.active{background:var(--red);border-color:var(--red);color:white;box-shadow:0 2px 8px rgba(232,25,44,.35);}
  .sline{flex:1;height:2px;background:var(--border);margin:0 2px;position:relative;top:-13px;}
  .sline.done{background:var(--navy);}
  .slbl{font-size:8px;font-weight:600;color:var(--text-muted);margin-top:3px;white-space:nowrap;}
  .slbl.active{color:var(--red);} .slbl.done{color:var(--navy);}

  /* form */
  .frow{display:grid;grid-template-columns:1fr 1fr;gap:7px;margin-bottom:7px;}
  .ff{display:flex;flex-direction:column;gap:2px;}
  .flbl{font-size:9.5px;font-weight:600;color:var(--navy);}
  .finp{padding:5px 9px;border:1.5px solid var(--border);border-radius:6px;font-size:10.5px;color:var(--text-body);background:white;font-family:'DM Sans',sans-serif;}

  /* alert */
  .al{padding:7px 10px;border-radius:6px;font-size:10px;display:flex;align-items:center;gap:7px;}
  .al.info{background:rgba(59,130,246,.08);color:#1D4ED8;border:1px solid rgba(59,130,246,.2);}
  .al.success{background:rgba(16,185,129,.08);color:#065F46;border:1px solid rgba(16,185,129,.2);}

  /* ‚îÄ‚îÄ ARCHITECTURE DIAGRAM SLIDE ‚îÄ‚îÄ */
  .arch-slide{flex-direction:column;align-items:center;gap:0;padding:64px 48px 48px;}
  .arch-content{display:flex;align-items:center;gap:48px;width:100%;}

  /* ‚îÄ‚îÄ TEXT PANEL ‚îÄ‚îÄ */
  .tp{width:295px;flex-shrink:0;display:flex;flex-direction:column;justify-content:center;}
  .te{font-family:'DM Mono',monospace;font-size:10px;color:var(--red);letter-spacing:3px;text-transform:uppercase;margin-bottom:12px;opacity:0;transform:translateY(16px);transition:all .5s .22s ease;}
  .th{font-family:'Playfair Display',serif;font-size:44px;font-weight:700;color:white;line-height:1.05;letter-spacing:-.5px;margin-bottom:14px;opacity:0;transform:translateY(16px);transition:all .5s .38s ease;}
  .th em{font-style:normal;color:var(--red);}
  .tb{font-size:13.5px;color:rgba(255,255,255,.48);line-height:1.75;font-weight:300;margin-bottom:18px;opacity:0;transform:translateY(16px);transition:all .5s .53s ease;}
  .tps{display:flex;flex-wrap:wrap;gap:6px;opacity:0;transform:translateY(16px);transition:all .5s .67s ease;}
  .pill{background:rgba(232,25,44,.09);border:1px solid rgba(232,25,44,.2);color:#ff8fa0;border-radius:20px;padding:3px 11px;font-size:10.5px;font-family:'DM Mono',monospace;}

  /* SDD note block */
  .note{
    background:rgba(15,36,71,.55);border:1px solid rgba(255,255,255,.07);
    border-radius:8px;padding:10px 14px;margin-top:14px;
    opacity:0;transform:translateY(16px);transition:all .5s .8s ease;
  }
  .note-label{font-family:'DM Mono',monospace;font-size:8.5px;color:rgba(232,25,44,.8);letter-spacing:2px;text-transform:uppercase;margin-bottom:5px;}
  .note-text{font-size:11px;color:rgba(255,255,255,.5);line-height:1.65;}

  .slide.active .te,.slide.active .th,.slide.active .tb,.slide.active .tps,.slide.active .note{opacity:1;transform:translateY(0);}

  /* ‚îÄ‚îÄ CONTROLS ‚îÄ‚îÄ */
  #progress{position:fixed;bottom:26px;left:50%;transform:translateX(-50%);display:flex;gap:7px;z-index:100;}
  .pdot{width:6px;height:6px;border-radius:3px;background:rgba(255,255,255,.18);transition:all .32s ease;cursor:pointer;}
  .pdot.active{width:26px;background:var(--red);}

  #nav{position:fixed;top:20px;right:22px;display:flex;gap:9px;z-index:100;}
  .nbtn{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.09);border-radius:50px;padding:6px 16px;color:rgba(255,255,255,.42);font-family:'DM Mono',monospace;font-size:10.5px;cursor:pointer;backdrop-filter:blur(10px);transition:all .2s;}
  .nbtn:hover{background:rgba(255,255,255,.1);color:white;}

  #brand{position:fixed;top:22px;left:26px;display:flex;align-items:center;gap:9px;z-index:100;}
  .bmark{width:28px;height:28px;background:var(--red);border-radius:7px;display:flex;align-items:center;justify-content:center;font-family:'Playfair Display',serif;font-weight:700;color:white;font-size:13px;}
  .bname{font-family:'Playfair Display',serif;font-size:13px;font-weight:600;color:rgba(255,255,255,.55);letter-spacing:.4px;}

  /* timer */
  #tring{position:fixed;bottom:18px;right:22px;width:30px;height:30px;z-index:100;opacity:.4;}

  /* ‚îÄ‚îÄ INTRO & OUTRO ‚îÄ‚îÄ */
  .cslide{flex-direction:column;text-align:center;gap:0;}
  .ilogo{width:68px;height:68px;background:var(--red);border-radius:16px;display:flex;align-items:center;justify-content:center;font-family:'Playfair Display',serif;font-weight:700;color:white;font-size:30px;box-shadow:0 0 50px rgba(232,25,44,.4),0 8px 24px rgba(232,25,44,.28);animation:lp 3s ease infinite;margin:0 auto 18px;}
  @keyframes lp{0%,100%{box-shadow:0 0 50px rgba(232,25,44,.4),0 8px 24px rgba(232,25,44,.28);}50%{box-shadow:0 0 80px rgba(232,25,44,.6),0 8px 40px rgba(232,25,44,.45);}}
  .ititle{font-family:'Playfair Display',serif;font-size:66px;font-weight:700;color:white;line-height:.95;letter-spacing:-.5px;margin-bottom:14px;}
  .ired{color:var(--red);}
  .isub{font-size:16px;color:rgba(255,255,255,.38);font-weight:300;letter-spacing:1px;margin-bottom:20px;}
  .itags{display:flex;gap:9px;flex-wrap:wrap;justify-content:center;}
  .itag{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.09);border-radius:4px;padding:5px 13px;font-family:'DM Mono',monospace;font-size:10px;color:rgba(255,255,255,.38);letter-spacing:.8px;}

  /* ‚îÄ‚îÄ ARCH DIAGRAM ‚îÄ‚îÄ */
  .arch-diagram{
    flex:1;display:flex;flex-direction:column;gap:10px;
    opacity:0;transform:translateY(20px);
    transition:all .7s .2s cubic-bezier(.16,1,.3,1);
  }
  .slide.active .arch-diagram{opacity:1;transform:translateY(0);}

  .arch-row{display:flex;gap:8px;justify-content:center;}
  .abox{
    border-radius:8px;padding:8px 12px;text-align:center;position:relative;
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    min-height:52px;min-width:110px;
  }
  .abox .aico{font-size:18px;margin-bottom:3px;}
  .abox .aname{font-family:'DM Sans',sans-serif;font-size:10px;font-weight:600;line-height:1.2;}
  .abox .asub{font-size:8.5px;font-weight:400;margin-top:2px;opacity:.7;}

  /* layer colours */
  .abox.partner{background:rgba(242,169,0,.12);border:1px solid rgba(242,169,0,.25);color:#e0a100;}
  .abox.integration{background:rgba(59,130,246,.1);border:1px solid rgba(59,130,246,.22);color:#60a5fa;}
  .abox.capillary{background:rgba(232,25,44,.1);border:1px solid rgba(232,25,44,.22);color:#f87171;}
  .abox.redemption{background:rgba(16,185,129,.1);border:1px solid rgba(16,185,129,.22);color:#34d399;}

  .arch-arrow{display:flex;align-items:center;justify-content:center;color:rgba(255,255,255,.2);font-size:18px;}
  .layer-label{font-family:'DM Mono',monospace;font-size:8.5px;letter-spacing:2px;text-transform:uppercase;color:rgba(255,255,255,.25);margin-bottom:4px;text-align:center;}

  .arch-panel{display:flex;gap:20px;align-items:flex-start;}
  .arch-left{flex:1;display:flex;flex-direction:column;gap:6px;}

  /* flow step pills */
  .fstep{
    display:flex;align-items:center;gap:8px;
    background:rgba(15,36,71,.55);border:1px solid rgba(255,255,255,.06);
    border-radius:8px;padding:8px 12px;
    opacity:0;transform:translateX(-16px);
  }
  .fstep.v{opacity:1;transform:translateX(0);}
  .fnum{width:20px;height:20px;border-radius:50%;background:var(--red);color:white;font-size:9px;font-weight:700;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-family:'DM Mono',monospace;}
  .ftext{font-size:11px;color:rgba(255,255,255,.65);}
  .ftext strong{color:white;font-weight:600;}

  /* ‚îÄ‚îÄ CONSTRAINTS SLIDE ‚îÄ‚îÄ */
  .constrain-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;flex:1;}
  .citem{
    background:rgba(15,36,71,.6);border:1px solid rgba(255,255,255,.06);
    border-radius:10px;padding:12px 14px;
    opacity:0;transform:translateY(14px);transition:all .45s ease;
  }
  .citem.v{opacity:1;transform:translateY(0);}
  .cnum{font-family:'DM Mono',monospace;font-size:9px;color:var(--red);font-weight:600;letter-spacing:1px;margin-bottom:4px;}
  .ctitle{font-size:12px;font-weight:600;color:white;margin-bottom:3px;}
  .cdesc{font-size:10.5px;color:rgba(255,255,255,.45);line-height:1.5;}

  /* ‚îÄ‚îÄ SECURITY CHECKLIST ‚îÄ‚îÄ */
  .sec-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;flex:1;}
  .sitem{
    display:flex;align-items:flex-start;gap:9px;
    background:rgba(15,36,71,.5);border:1px solid rgba(255,255,255,.05);
    border-radius:8px;padding:9px 12px;
    opacity:0;transform:translateY(12px);transition:all .4s ease;
  }
  .sitem.v{opacity:1;transform:translateY(0);}
  .scheck{width:18px;height:18px;border-radius:50%;background:rgba(16,185,129,.15);border:1.5px solid var(--success);display:flex;align-items:center;justify-content:center;color:var(--success);font-size:9px;flex-shrink:0;margin-top:1px;}
  .stname{font-size:11.5px;font-weight:600;color:white;}
  .stdesc{font-size:9.5px;color:rgba(255,255,255,.42);margin-top:2px;}

  /* ‚îÄ‚îÄ TIMER BAR ‚îÄ‚îÄ */
  #timer-bar{
    position:fixed;bottom:0;left:0;right:0;height:2px;
    background:rgba(255,255,255,.06);z-index:200;
  }
  #timer-fill{height:100%;background:linear-gradient(90deg,var(--red),#ff6b6b);width:0%;transition:width .1s linear;}

  /* ‚îÄ‚îÄ SLIDE COUNTER ‚îÄ‚îÄ */
  #slide-counter{
    position:fixed;top:22px;left:50%;transform:translateX(-50%);
    font-family:'DM Mono',monospace;font-size:10px;
    color:rgba(255,255,255,.25);letter-spacing:2px;z-index:100;
  }
</style>
</head>
<body>

<div class="bg"></div>
<div class="grid"></div>

<div id="brand"><div class="bmark">i</div><div class="bname">IndiGo Co-Brand Loyalty</div></div>
<div id="slide-counter">01 / 09</div>
<div id="nav">
  <button class="nbtn" onclick="prevSlide()">‚Üê Prev</button>
  <button class="nbtn" onclick="nextSlide()">Next ‚Üí</button>
</div>
<div id="progress"></div>
<svg id="tring" viewBox="0 0 30 30">
  <circle cx="15" cy="15" r="12" fill="none" stroke="rgba(255,255,255,.12)" stroke-width="2"/>
  <circle id="tcirc" cx="15" cy="15" r="12" fill="none" stroke="#E8192C" stroke-width="2"
    stroke-dasharray="75.4" stroke-dashoffset="0" stroke-linecap="round"
    transform="rotate(-90 15 15)"/>
</svg>
<div id="timer-bar"><div id="timer-fill"></div></div>

<div id="stage">

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- SLIDE 0 ‚Äî INTRO                             -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide cslide active" id="slide-0">
  <div class="ilogo">i</div>
  <div class="ititle">IndiGo<br><span class="ired">Co-Brand</span><br>Loyalty</div>
  <div class="isub">System Design Document ¬∑ v1.0 ¬∑ Feb 2025 ¬∑ Powered by Capillary Tech</div>
  <div class="itags">
    <div class="itag">CAPILLARY LOYALTY+</div>
    <div class="itag">NEO WORKFLOWS</div>
    <div class="itag">CONNECT+ SFTP ETL</div>
    <div class="itag">IBC POINTS</div>
    <div class="itag">CO-BRAND CARDS</div>
    <div class="itag">ADMIN PORTAL</div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- SLIDE 1 ‚Äî ARCHITECTURE OVERVIEW            -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide arch-slide" id="slide-1">
  <div class="arch-panel">
    <!-- Architecture diagram -->
    <div class="arch-diagram" style="max-width:580px;">
      <div class="layer-label">Partner Channel Layer</div>
      <div class="arch-row">
        <div class="abox partner"><div class="aico">üè¶</div><div class="aname">Bank Partner</div><div class="asub">Card lifecycle CSV</div></div>
        <div class="abox partner"><div class="aico">üõçÔ∏è</div><div class="aname">Retail Partner</div><div class="asub">Daily SFTP batch</div></div>
        <div class="abox partner"><div class="aico">üçï</div><div class="aname">Food Partner</div><div class="asub">Daily SFTP batch</div></div>
      </div>
      <div class="arch-arrow">‚Üì SFTP / SSH key-auth</div>

      <div class="layer-label">Integration &amp; Orchestration Layer</div>
      <div class="arch-row">
        <div class="abox integration"><div class="aico">üìÇ</div><div class="aname">Connect+</div><div class="asub">SFTP poll ¬∑ CSV‚ÜíJSON ETL</div></div>
        <div class="abox integration" style="min-width:140px;"><div class="aico">‚öôÔ∏è</div><div class="aname">Neo Workflow Engine</div><div class="asub">Validate ¬∑ Dedup ¬∑ Route ¬∑ Log</div></div>
        <div class="abox integration"><div class="aico">üóÑÔ∏è</div><div class="aname">Neo MongoDB</div><div class="asub">card_records ¬∑ audit_log ¬∑ retry</div></div>
      </div>
      <div class="arch-arrow">‚Üì Capillary v2 REST / HTTPS + Basic Auth</div>

      <div class="layer-label">Capillary Loyalty Platform</div>
      <div class="arch-row">
        <div class="abox capillary"><div class="aico">‚úàÔ∏è</div><div class="aname">Loyalty+</div><div class="asub">IBC earn / tier rules</div></div>
        <div class="abox capillary"><div class="aico">üéØ</div><div class="aname">Promotions Engine</div><div class="asub">Campaign bonus earn</div></div>
        <div class="abox capillary"><div class="aico">üí≥</div><div class="aname">Card v2 API</div><div class="asub">Issue ¬∑ Upgrade ¬∑ Close</div></div>
      </div>
      <div class="arch-arrow">‚Üì Redemption &amp; Reporting</div>

      <div class="layer-label">Redemption &amp; Reporting Layer</div>
      <div class="arch-row">
        <div class="abox redemption"><div class="aico">üì±</div><div class="aname">SkyPlus App/Web</div><div class="asub">Sole redemption channel</div></div>
        <div class="abox redemption"><div class="aico">üíº</div><div class="aname">Finance</div><div class="asub">Funding reconciliation</div></div>
        <div class="abox redemption"><div class="aico">üéß</div><div class="aname">MemberCare</div><div class="asub">Exception handling</div></div>
      </div>
    </div>

    <!-- Text panel -->
    <div class="tp" style="width:270px;">
      <div class="te">Section 6 ¬∑ Architecture</div>
      <div class="th" style="font-size:38px;">4-Layer<br><em>System</em><br>Design</div>
      <div class="tb">Batch-first, orchestration-layer approach. Partners push daily CSV via SFTP ‚Äî no real-time API required. Neo handles all business logic before calling Capillary.</div>
      <div class="tps">
        <span class="pill">Loose Coupling</span>
        <span class="pill">Idempotency</span>
        <span class="pill">Audit First</span>
      </div>
      <div class="note">
        <div class="note-label">SDD ¬ß5 ¬∑ Solution Strategy</div>
        <div class="note-text">Single source of truth: Capillary Loyalty+ holds all IBC balances. No custom middleware ‚Äî all logic lives in Neo low-code workflows.</div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- SLIDE 2 ‚Äî DASHBOARD                         -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide" id="slide-2">
  <div class="browser">
    <div class="chrome">
      <div class="cdots"><div class="cdot r"></div><div class="cdot y"></div><div class="cdot g"></div></div>
      <div class="cbar"><span class="lock">üîí</span>partner.indigo.in/dashboard</div>
    </div>
    <div class="bbody">
      <div class="shell">
        <div class="sb">
          <div class="sb-logo"><div class="sb-mark">i</div><div><div class="sb-brand">IndiGo</div><div class="sb-sub">Partner Portal</div></div></div>
          <div class="sb-nav">
            <div class="sb-sec">Main</div>
            <div class="sb-item active">‚ñ¶ Dashboard</div>
            <div class="sb-item">‚¨° Partners</div>
            <div class="sb-sec">Configuration</div>
            <div class="sb-item">‚áå Field Mappings</div>
            <div class="sb-item">‚åÇ Campaigns</div>
            <div class="sb-sec">Monitoring</div>
            <div class="sb-item">‚åá TX Monitor <span class="sb-badge">2</span></div>
          </div>
          <div class="sb-foot"><div class="sb-av">RK</div><div><div class="sb-uname">Rahul Kumar</div><div class="sb-role">Program Admin</div></div></div>
        </div>
        <div class="main">
          <div class="mhdr"><div><div class="mtitle">Overview</div><div class="mmeta">Program health at a glance</div></div></div>
          <div class="mbody">
            <div class="stats-row">
              <div class="sbox R"><div class="sico R">‚úà</div><div class="sval">160.4M</div><div class="slbl">IBC Points Issued</div><div class="schg up">‚ñ≤ +12.4% MTD</div></div>
              <div class="sbox N"><div class="sico N">‚¨°</div><div class="sval">5</div><div class="slbl">Active Partners</div><div class="schg up">‚ñ≤ +1 this quarter</div></div>
              <div class="sbox G"><div class="sico G">‚áå</div><div class="sval">1.6M</div><div class="slbl">Transactions MTD</div><div class="schg up">‚ñ≤ +8.1%</div></div>
              <div class="sbox S"><div class="sico S">‚úì</div><div class="sval">97.4%</div><div class="slbl">Success Rate</div><div class="schg up">‚ñ≤ +0.3%</div></div>
            </div>
            <div class="twocol">
              <div class="card">
                <div class="card-hdr"><span class="card-title">Recent Activity</span></div>
                <table class="t"><thead><tr><th>Partner</th><th>Event</th><th>Status</th></tr></thead>
                <tbody>
                  <tr><td style="font-weight:600">Zomato</td><td style="color:var(--text-muted);font-size:10px">Batch: 240 txns processed</td><td><span class="bdg active">active</span></td></tr>
                  <tr><td style="font-weight:600">HDFC</td><td style="color:var(--text-muted);font-size:10px">Financial earn posted</td><td><span class="bdg active">active</span></td></tr>
                  <tr><td style="font-weight:600">Amazon IN</td><td style="color:var(--text-muted);font-size:10px">Pending SFTP config</td><td><span class="bdg pending">pending</span></td></tr>
                  <tr><td style="font-weight:600">Axis Bank</td><td style="color:var(--text-muted);font-size:10px">Campaign activated</td><td><span class="bdg active">active</span></td></tr>
                </tbody></table>
              </div>
              <div class="card">
                <div class="card-hdr"><span class="card-title">Program Health</span></div>
                <div style="padding:10px 12px;">
                  <div class="hrow"><div class="hlbl">TX Success Rate</div><div class="hbar"><div class="hfill" style="width:97.4%;background:var(--success);"></div></div><div class="hval" style="color:var(--success);">97.4%</div></div>
                  <div class="hrow"><div class="hlbl">Audit Log Coverage</div><div class="hbar"><div class="hfill" style="width:100%;background:var(--navy-light);"></div></div><div class="hval" style="color:var(--navy);">100%</div></div>
                  <div class="hrow"><div class="hlbl">Dedup Effectiveness</div><div class="hbar"><div class="hfill" style="width:99.1%;background:var(--info);"></div></div><div class="hval" style="color:var(--info);">99.1%</div></div>
                  <div class="hrow"><div class="hlbl">Avg Processing</div><div class="hbar"><div class="hfill" style="width:82%;background:var(--gold);"></div></div><div class="hval" style="color:var(--gold);">82%</div></div>
                  <div class="al info" style="margin-top:8px;font-size:9.5px;">‚Ñπ All workflows within healthy bounds</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="tp">
    <div class="te">Screen 1 ¬∑ Dashboard</div>
    <div class="th">Program<br><em>Health</em><br>at a Glance</div>
    <div class="tb">Live KPIs: 160M+ IBC points issued, transaction success rates, and partner activity ‚Äî all sourced from Capillary Loyalty+ and Neo MongoDB audit logs.</div>
    <div class="tps"><span class="pill">160M+ Points</span><span class="pill">5 Partners</span><span class="pill">97.4% Success</span></div>
    <div class="note"><div class="note-label">SDD ¬ß8.4 ¬∑ Audit &amp; Logging</div><div class="note-text">Every accrual event writes a MongoDB audit document: partnerCode, txnRef, pointsAwarded, fundingRatio ‚Äî no accrual is complete without a successful audit write.</div></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- SLIDE 3 ‚Äî NON-FINANCIAL FLOW               -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide" id="slide-3">
  <!-- Flow steps panel -->
  <div style="display:flex;flex-direction:column;gap:8px;width:360px;flex-shrink:0;">
    <div style="font-family:'DM Mono',monospace;font-size:9.5px;color:var(--red);letter-spacing:3px;text-transform:uppercase;margin-bottom:4px;opacity:0;transform:translateY(14px);transition:all .5s .2s ease;" class="te2">SDD ¬ß7.1 ¬∑ Non-Financial Partner Flow</div>
    <div class="fstep" id="fs0"><div class="fnum">1</div><div class="ftext"><strong>Connect+ polls SFTP</strong> ‚Äî daily CSV ingested, {PARTNER_CODE}_YYYYMMDD.csv</div></div>
    <div class="fstep" id="fs1"><div class="fnum">2</div><div class="ftext"><strong>validateInput</strong> ‚Äî Schema block: FFN, txnRef, amount, date all required</div></div>
    <div class="fstep" id="fs2"><div class="fnum">3</div><div class="ftext"><strong>deduplicateCheck</strong> ‚Äî MongoDB lookup by partnerCode + transactionRef</div></div>
    <div class="fstep" id="fs3"><div class="fnum">4</div><div class="ftext"><strong>customerLookup</strong> ‚Äî GET /v2/customers/lookup (identifierName=externalId, FFN)</div></div>
    <div class="fstep" id="fs4"><div class="fnum">5</div><div class="ftext"><strong>transactionPost</strong> ‚Äî POST /v2/transactions, campaignCode as custom field</div></div>
    <div class="fstep" id="fs5"><div class="fnum">6</div><div class="ftext"><strong>auditLogWrite</strong> ‚Äî putMongo: pointsAwarded, fundingRatio, capillaryTxnId</div></div>
    <div class="fstep" id="fs6"><div class="fnum">7</div><div class="ftext"><strong>retryQueue</strong> ‚Äî 5xx errors queued in MongoDB; 3-attempt retry via Connect+ schedule</div></div>
  </div>

  <!-- Browser showing TX Monitor -->
  <div class="browser">
    <div class="chrome">
      <div class="cdots"><div class="cdot r"></div><div class="cdot y"></div><div class="cdot g"></div></div>
      <div class="cbar"><span class="lock">üîí</span>partner.indigo.in/monitor</div>
    </div>
    <div class="bbody">
      <div class="shell">
        <div class="sb">
          <div class="sb-logo"><div class="sb-mark">i</div><div><div class="sb-brand">IndiGo</div><div class="sb-sub">Partner Portal</div></div></div>
          <div class="sb-nav">
            <div class="sb-sec">Main</div>
            <div class="sb-item">‚ñ¶ Dashboard</div>
            <div class="sb-item">‚¨° Partners</div>
            <div class="sb-sec">Monitoring</div>
            <div class="sb-item active">‚åá TX Monitor <span class="sb-badge">2</span></div>
          </div>
          <div class="sb-foot"><div class="sb-av">RK</div><div><div class="sb-uname">Rahul Kumar</div><div class="sb-role">Program Admin</div></div></div>
        </div>
        <div class="main">
          <div class="mhdr"><div><div class="mtitle">Transaction Monitor</div><div class="mmeta">Live logs, audit trail &amp; retry queue</div></div></div>
          <div class="mbody">
            <div class="tabbar">
              <div class="tabi active">Audit Log</div>
              <div class="tabi">Transactions</div>
              <div class="tabi">Errors / Retry <span style="background:rgba(232,25,44,.12);color:var(--red);padding:1px 5px;border-radius:8px;font-size:8.5px;margin-left:3px;">2</span></div>
            </div>
            <div class="card">
              <div class="card-hdr"><span class="card-title">Live Audit Log</span><div class="btn-s" style="font-size:9px;padding:4px 8px;">‚Üì Export CSV</div></div>
              <div style="padding:4px 12px 8px;">
                <div class="lr"><div class="ldot s"></div><div class="ltime">09:14:32</div><div><div class="lmsg">Transaction processed ‚Äî ZOMATO_IN</div><div class="lmeta">txnRef: ZOM-0041 | FFN: IBC8823441 | +150 IBC pts</div></div></div>
                <div class="lr"><div class="ldot e"></div><div class="ltime">09:12:10</div><div><div class="lmsg" style="color:var(--red);">Customer lookup failed ‚Äî FFN not found</div><div class="lmeta">txnRef: ZOM-0040 | FFN: IBC0000001 | Error 8013</div></div></div>
                <div class="lr"><div class="ldot s"></div><div class="ltime">09:09:04</div><div><div class="lmsg">Transaction processed ‚Äî HDFC financial earn</div><div class="lmeta">txnRef: HDFC-0021 | FFN: IBC7743900 | +840 IBC pts</div></div></div>
                <div class="lr"><div class="ldot w"></div><div class="ltime">09:07:30</div><div><div class="lmsg" style="color:var(--warning);">Duplicate transaction skipped</div><div class="lmeta">txnRef: ZOM-9981 | already in audit log (DUPLICATE_SKIPPED)</div></div></div>
                <div class="lr"><div class="ldot s"></div><div class="ltime">09:05:00</div><div><div class="lmsg">Transaction processed ‚Äî AXIS_IN</div><div class="lmeta">txnRef: AXIS-0009 | FFN: IBC5512003 | +225 IBC pts</div></div></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- SLIDE 4 ‚Äî PARTNERS + ONBOARDING             -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide" id="slide-4">
  <div class="browser">
    <div class="chrome">
      <div class="cdots"><div class="cdot r"></div><div class="cdot y"></div><div class="cdot g"></div></div>
      <div class="cbar"><span class="lock">üîí</span>partner.indigo.in/partners ¬∑ Onboard New Partner</div>
    </div>
    <div class="bbody" style="background:rgba(10,25,49,.35);display:flex;align-items:center;justify-content:center;">
      <!-- Wizard overlay -->
      <div style="background:white;border-radius:10px;width:500px;box-shadow:0 20px 60px rgba(0,0,0,.3);overflow:hidden;">
        <div style="padding:16px 20px;border-bottom:1px solid var(--border-light);display:flex;justify-content:space-between;align-items:center;">
          <div><div style="font-family:'Playfair Display',serif;font-size:15px;font-weight:600;color:var(--navy);">Onboard New Partner</div><div style="font-size:10px;color:var(--text-muted);margin-top:1px;">Step 2 of 5 ‚Äî Earn &amp; Funding</div></div>
          <div style="color:var(--text-muted);font-size:15px;">‚úï</div>
        </div>
        <div style="padding:16px 20px;">
          <!-- Stepper -->
          <div class="srow">
            <div class="si"><div class="sc done">‚úì</div><div class="slbl done">Partner Details</div></div>
            <div class="sline done"></div>
            <div class="si"><div class="sc active">2</div><div class="slbl active">Earn &amp; Funding</div></div>
            <div class="sline"></div>
            <div class="si"><div class="sc">3</div><div class="slbl">Field Mappings</div></div>
            <div class="sline"></div>
            <div class="si"><div class="sc">4</div><div class="slbl">Campaign Setup</div></div>
            <div class="sline"></div>
            <div class="si"><div class="sc">5</div><div class="slbl">Review</div></div>
          </div>
          <div style="font-family:'Playfair Display',serif;font-size:12px;font-weight:600;color:var(--navy);padding-bottom:7px;border-bottom:1px solid var(--border-light);margin-bottom:9px;">Points Earn Configuration</div>
          <div class="frow">
            <div class="ff"><div class="flbl">Base Earn Rate <span style="color:var(--red)">*</span></div><input class="finp" value="1.5√ó" readonly></div>
            <div class="ff"><div class="flbl">Earn Type <span style="color:var(--red)">*</span></div><input class="finp" value="Non-Financial" readonly></div>
          </div>
          <div style="font-family:'Playfair Display',serif;font-size:12px;font-weight:600;color:var(--navy);padding-bottom:7px;border-bottom:1px solid var(--border-light);margin-bottom:9px;margin-top:11px;">Funding Split (must total 100%)</div>
          <div class="frow">
            <div class="ff"><div class="flbl">IndiGo Funding % <span style="color:var(--red)">*</span></div><input class="finp" value="30%" readonly></div>
            <div class="ff"><div class="flbl">Partner Funding % <span style="color:var(--red)">*</span></div><input class="finp" value="70%" readonly></div>
          </div>
          <div class="al info" style="margin-top:8px;">‚Ñπ Funding splits drive per-event cost-sharing tracked in Neo MongoDB audit records.</div>
        </div>
        <div style="padding:11px 20px;border-top:1px solid var(--border-light);display:flex;justify-content:flex-end;gap:7px;">
          <div class="btn-s">‚Üê Back</div>
          <div class="btn-r">Next: Field Mappings ‚Üí</div>
        </div>
      </div>
    </div>
  </div>
  <div class="tp">
    <div class="te">Screen 2 ¬∑ Partner Onboarding</div>
    <div class="th" style="font-size:40px;">5-Step<br><em>Config</em><br>Wizard</div>
    <div class="tb">Zero code per partner. The wizard configures: partner details, earn rate, funding split, CMS field mappings, and campaign ‚Äî then auto-deploys the Neo workflow and SFTP dataflow.</div>
    <div class="tps"><span class="pill">Zero-Code Onboarding</span><span class="pill">Earn Rate Config</span><span class="pill">Funding Split</span></div>
    <div class="note"><div class="note-label">SDD ¬ß9.1 ¬∑ Partner Onboarding</div><div class="note-text">CMS config stores: field mapping, earning model, contract validity dates, funding ratios. No code changes required per partner ‚Äî Neo CMS pattern handles all mapping at runtime.</div></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- SLIDE 5 ‚Äî FIELD MAPPINGS                    -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide" id="slide-5">
  <div class="browser">
    <div class="chrome">
      <div class="cdots"><div class="cdot r"></div><div class="cdot y"></div><div class="cdot g"></div></div>
      <div class="cbar"><span class="lock">üîí</span>partner.indigo.in/mappings</div>
    </div>
    <div class="bbody">
      <div class="shell">
        <div class="sb">
          <div class="sb-logo"><div class="sb-mark">i</div><div><div class="sb-brand">IndiGo</div><div class="sb-sub">Partner Portal</div></div></div>
          <div class="sb-nav">
            <div class="sb-sec">Configuration</div>
            <div class="sb-item active">‚áå Field Mappings</div>
            <div class="sb-item">‚åÇ Campaigns</div>
          </div>
          <div class="sb-foot"><div class="sb-av">RK</div><div><div class="sb-uname">Rahul Kumar</div><div class="sb-role">Program Admin</div></div></div>
        </div>
        <div class="main">
          <div class="mhdr"><div><div class="mtitle">CMS Field Mappings</div><div class="mmeta">CSV column ‚Üí Capillary field configuration</div></div></div>
          <div class="mbody">
            <div class="tabbar">
              <div class="tabi active">ZOMATO_IN</div>
              <div class="tabi">HDFC</div>
              <div class="tabi">AMAZON_IN</div>
              <div class="tabi">AXIS</div>
            </div>
            <div class="card">
              <div class="card-hdr"><span class="card-title">Zomato ‚Üí Capillary v2 Mapping</span><div style="display:flex;gap:5px;"><div class="btn-s" style="font-size:9px;padding:3px 8px;">+ Add Row</div><div class="btn-r" style="font-size:9px;padding:3px 8px;">‚Üì Export</div></div></div>
              <div style="padding:7px 12px;">
                <div style="display:grid;grid-template-columns:1fr 22px 1fr 62px;gap:5px;padding:3px 0;border-bottom:1px solid var(--border);margin-bottom:3px;">
                  <div style="font-size:8.5px;font-weight:700;letter-spacing:.06em;text-transform:uppercase;color:var(--text-muted);">Partner CSV Field</div>
                  <div></div>
                  <div style="font-size:8.5px;font-weight:700;letter-spacing:.06em;text-transform:uppercase;color:var(--text-muted);">Capillary API Field</div>
                  <div style="font-size:8.5px;font-weight:700;letter-spacing:.06em;text-transform:uppercase;color:var(--text-muted);">Required</div>
                </div>
                <div class="mr"><input class="finp" value="customer_ffn" readonly style="font-family:'DM Mono',monospace;font-size:10px;"><div class="marrow">‚Üí</div><input class="finp" value="ffn / externalId" readonly style="font-family:'DM Mono',monospace;font-size:10px;color:var(--navy);font-weight:600;"><div class="mreq">‚úì Required</div></div>
                <div class="mr"><input class="finp" value="transaction_ref" readonly style="font-family:'DM Mono',monospace;font-size:10px;"><div class="marrow">‚Üí</div><input class="finp" value="billNumber" readonly style="font-family:'DM Mono',monospace;font-size:10px;color:var(--navy);font-weight:600;"><div class="mreq">‚úì Required</div></div>
                <div class="mr"><input class="finp" value="transaction_date" readonly style="font-family:'DM Mono',monospace;font-size:10px;"><div class="marrow">‚Üí</div><input class="finp" value="billingDate (UTC)" readonly style="font-family:'DM Mono',monospace;font-size:10px;color:var(--navy);font-weight:600;"><div class="mreq">‚úì Required</div></div>
                <div class="mr"><input class="finp" value="transaction_amount" readonly style="font-family:'DM Mono',monospace;font-size:10px;"><div class="marrow">‚Üí</div><input class="finp" value="billAmount" readonly style="font-family:'DM Mono',monospace;font-size:10px;color:var(--navy);font-weight:600;"><div class="mreq">‚úì Required</div></div>
                <div class="mr"><input class="finp" value="campaign_code" readonly style="font-family:'DM Mono',monospace;font-size:10px;"><div class="marrow">‚Üí</div><input class="finp" value="customFields.campaignCode" readonly style="font-family:'DM Mono',monospace;font-size:10px;color:var(--navy);font-weight:600;"><div style="font-size:8.5px;color:var(--text-muted);font-family:'DM Mono',monospace;">Optional</div></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="tp">
    <div class="te">Screen 3 ¬∑ CMS Mappings</div>
    <div class="th">CSV <em>‚Üí</em><br>Capillary<br>Mapping</div>
    <div class="tb">Each partner sends their own CSV schema. Per-partner mappings translate CSV columns to Capillary v2 API fields ‚Äî FFN, txnRef, amount, date. Campaign codes pass to the Promotions Engine.</div>
    <div class="tps"><span class="pill">Per-Partner Schema</span><span class="pill">FFN as externalId</span><span class="pill">UTC Normalisation</span></div>
    <div class="note"><div class="note-label">SDD ¬ß7.1 CSV Spec ¬∑ ¬ß8.5 Timezone</div><div class="note-text">File format: {PARTNER_CODE}_YYYYMMDD.csv ¬∑ UTF-8 ¬∑ ISO 8601 timestamps. Neo scripts normalise all timestamps to UTC before Capillary write.</div></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- SLIDE 6 ‚Äî CAMPAIGNS & FINANCIAL CARD        -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide" id="slide-6">
  <div class="browser">
    <div class="chrome">
      <div class="cdots"><div class="cdot r"></div><div class="cdot y"></div><div class="cdot g"></div></div>
      <div class="cbar"><span class="lock">üîí</span>partner.indigo.in/campaigns</div>
    </div>
    <div class="bbody">
      <div class="shell">
        <div class="sb">
          <div class="sb-logo"><div class="sb-mark">i</div><div><div class="sb-brand">IndiGo</div><div class="sb-sub">Partner Portal</div></div></div>
          <div class="sb-nav">
            <div class="sb-sec">Configuration</div>
            <div class="sb-item">‚áå Field Mappings</div>
            <div class="sb-item active">‚åÇ Campaigns &amp; Funding</div>
          </div>
          <div class="sb-foot"><div class="sb-av">RK</div><div><div class="sb-uname">Rahul Kumar</div><div class="sb-role">Program Admin</div></div></div>
        </div>
        <div class="main">
          <div class="mhdr"><div><div class="mtitle">Campaigns &amp; Funding</div><div class="mmeta">Campaign codes and funding split configuration</div></div><div class="btn-r" style="font-size:9.5px;padding:5px 9px;">+ New Campaign</div></div>
          <div class="mbody">
            <div class="cc">
              <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:7px;">
                <div><div class="ccname">ZOMATO_FEB25</div><div class="ccmeta">Zomato ¬∑ Non-Financial ¬∑ Expires Mar 31 2025</div></div>
                <div style="display:flex;gap:5px;align-items:center;"><span class="bdg active">Active</span><div class="btn-s" style="font-size:9px;padding:3px 8px;">Edit</div></div>
              </div>
              <div class="cpbar"><div class="cpfill" style="width:58%;"></div></div>
              <div class="ccfoot"><div class="ccstat">Budget: <strong>‚Çπ5,00,000</strong></div><div class="ccstat">Bonus: <strong>+0.5√ó</strong></div><div class="ccstat">Used: <strong>58%</strong></div><div class="ccstat">Funding: <strong>30/70</strong></div></div>
            </div>
            <div class="cc">
              <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:7px;">
                <div><div class="ccname">AXIS_JAN25</div><div class="ccmeta">Axis Bank ¬∑ Financial ¬∑ Expires Feb 28 2025</div></div>
                <div style="display:flex;gap:5px;align-items:center;"><span class="bdg active">Active</span><div class="btn-s" style="font-size:9px;padding:3px 8px;">Edit</div></div>
              </div>
              <div class="cpbar"><div class="cpfill" style="width:82%;"></div></div>
              <div class="ccfoot"><div class="ccstat">Budget: <strong>‚Çπ12,00,000</strong></div><div class="ccstat">Bonus: <strong>+1.0√ó</strong></div><div class="ccstat">Used: <strong>82%</strong></div><div class="ccstat">Funding: <strong>40/60</strong></div></div>
            </div>
            <div class="cc" style="opacity:.55;">
              <div style="display:flex;justify-content:space-between;align-items:flex-start;">
                <div><div class="ccname">MMT_DEC24</div><div class="ccmeta">MakeMyTrip ¬∑ Travel ¬∑ Expired Dec 31 2024</div></div>
                <span class="bdg inactive">Inactive</span>
              </div>
              <div class="cpbar"><div class="cpfill" style="width:100%;background:var(--text-muted);"></div></div>
              <div class="ccfoot"><div class="ccstat">Budget: <strong>‚Çπ3,00,000</strong></div><div class="ccstat">Used: <strong>100%</strong></div></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="tp">
    <div class="te">Screen 4 ¬∑ Campaigns</div>
    <div class="th" style="font-size:40px;">Campaign<br>&amp; <em>Funding</em><br>Control</div>
    <div class="tb">One active campaign per partner (Phase 1 constraint). Bonus earn passes as customFields.campaignCode triggering the Capillary Promotions Engine. IndiGo/Partner cost-split tracked per event.</div>
    <div class="tps"><span class="pill">Promotions Engine</span><span class="pill">Budget Tracking</span><span class="pill">1 Campaign / Partner</span></div>
    <div class="note"><div class="note-label">SDD ¬ß7.3 ¬∑ ¬ß2 Constraint #2</div><div class="note-text">Multi-campaign concurrency per partner is a Phase 2 feature. Funding split (e.g. 30% IndiGo / 70% Partner) written to MongoDB audit doc for finance reconciliation.</div></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- SLIDE 7 ‚Äî CONSTRAINTS & PHASE 1 SCOPE       -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide" id="slide-7">
  <div class="tp" style="width:280px;flex-shrink:0;">
    <div class="te">SDD ¬ß2 ¬∑ Constraints</div>
    <div class="th" style="font-size:40px;">Phase 1<br><em>Scope</em> &amp;<br>Limits</div>
    <div class="tb">7 architectural constraints define Phase 1 boundaries ‚Äî ensuring a focused, reliable launch before tackling real-time integrations and multi-campaign support in Phase 2.</div>
    <div class="tps"><span class="pill">Batch-Only</span><span class="pill">FFN Mandatory</span><span class="pill">SkyPlus Redemption</span></div>
  </div>
  <div class="constrain-grid" style="flex:1;">
    <div class="citem" id="ci0"><div class="cnum">C-01</div><div class="ctitle">Batch-Only Integration</div><div class="cdesc">Real-time partner API is Phase 2. All data via daily SFTP CSV files.</div></div>
    <div class="citem" id="ci1"><div class="cnum">C-02</div><div class="ctitle">Single Campaign Per Partner</div><div class="cdesc">Only one active campaign per partner at a time. Multi-campaign is Phase 2.</div></div>
    <div class="citem" id="ci2"><div class="cnum">C-03</div><div class="ctitle">IBC Redemption in SkyPlus Only</div><div class="cdesc">Points may only be redeemed within the IndiGo SkyPlus Web/App.</div></div>
    <div class="citem" id="ci3"><div class="cnum">C-04</div><div class="ctitle">FFN Mandatory for Accrual</div><div class="cdesc">Points credited only when a valid Frequent Flyer Number is present.</div></div>
    <div class="citem" id="ci4"><div class="cnum">C-05</div><div class="ctitle">Card Uniqueness Enforced</div><div class="cdesc">No duplicate co-branded cards for same Partner + Product + Network (BR-15).</div></div>
    <div class="citem" id="ci5"><div class="cnum">C-06</div><div class="ctitle">Contract Validity Enforced</div><div class="cdesc">System blocks accrual outside the partnership's contract start and end dates.</div></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- SLIDE 8 ‚Äî SECURITY & OUTRO                  -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="slide" id="slide-8">
  <div class="tp" style="width:260px;flex-shrink:0;">
    <div class="te">SDD ¬ß22 ¬∑ Security</div>
    <div class="th" style="font-size:40px;">Enterprise<br><em>Security</em><br>Posture</div>
    <div class="tb">Full security checklist verified: HTTPS/TLS on all API calls, SSH key SFTP auth, VPC isolation, GDPR compliance, OWASP Top 10, and rate limiting at the Capillary API gateway.</div>
    <div class="tps"><span class="pill">HTTPS + TLS</span><span class="pill">GDPR Compliant</span><span class="pill">VPC Isolated</span></div>
    <div class="note" style="margin-top:12px;">
      <div class="note-label">SDD ¬ß23 ¬∑ Inbound APIs</div>
      <div class="note-text">Phase 1 exposes no inbound HTTP endpoints. All ingestion is Connect+ polling SFTP. Phase 2 will add real-time webhook endpoints for partner event push.</div>
    </div>
  </div>
  <div class="sec-grid" style="flex:1;">
    <div class="sitem" id="si0"><div class="scheck">‚úì</div><div><div class="stname">SSL/TLS Everywhere</div><div class="stdesc">All Capillary API calls over HTTPS. SFTP via SSH key-based auth.</div></div></div>
    <div class="sitem" id="si1"><div class="scheck">‚úì</div><div><div class="stname">DDoS / WAF Protection</div><div class="stdesc">Capillary API Gateway WAF. Partner SFTP connections IP-restricted.</div></div></div>
    <div class="sitem" id="si2"><div class="scheck">‚úì</div><div><div class="stname">OWASP Top 10</div><div class="stdesc">Capillary platform maintained. Neo workflow inputs validated via Schema blocks.</div></div></div>
    <div class="sitem" id="si3"><div class="scheck">‚úì</div><div><div class="stname">PII Protection</div><div class="stdesc">PII handled by Capillary's framework. MongoDB stores only internal IDs.</div></div></div>
    <div class="sitem" id="si4"><div class="scheck">‚úì</div><div><div class="stname">Rate Limiting</div><div class="stdesc">Capillary Gateway enforces rate limits. Batch sizes configured below thresholds.</div></div></div>
    <div class="sitem" id="si5"><div class="scheck">‚úì</div><div><div class="stname">GDPR &amp; VPC Isolation</div><div class="stdesc">Capillary GDPR compliance inherited. Tenant-level VPC isolation enforced.</div></div></div>
    <div class="sitem" id="si6"><div class="scheck">‚úì</div><div><div class="stname">Idempotency Enforced</div><div class="stdesc">MongoDB dedup key: {partnerCode + transactionRef}. Duplicate ‚Üí 200 SKIPPED.</div></div></div>
    <div class="sitem" id="si7"><div class="scheck">‚úì</div><div><div class="stname">Retry &amp; Backoff Queue</div><div class="stdesc">5xx errors queued in MongoDB retry_queue. Max 3 attempts, then manual review.</div></div></div>
  </div>
</div>

</div><!-- /stage -->

<script>
const TOTAL = 9;
const DURATION = 4000; // ~36s total across 9 slides
let current = 0, elapsed = 0, lastTs = null;
const circ = document.getElementById('tcirc');
const fill = document.getElementById('timer-fill');
const counter = document.getElementById('slide-counter');
const C = 75.4;

// Build progress dots
const pb = document.getElementById('progress');
for (let i = 0; i < TOTAL; i++) {
  const d = document.createElement('div');
  d.className = 'pdot';
  d.onclick = () => goTo(i);
  pb.appendChild(d);
}

function padNum(n) { return String(n).padStart(2,'0'); }

function goTo(n) {
  // Deactivate
  const prev = document.getElementById('slide-' + current);
  if (prev) prev.classList.remove('active');
  document.querySelectorAll('.pdot')[current]?.classList.remove('active');

  current = ((n % TOTAL) + TOTAL) % TOTAL;

  // Activate
  const next = document.getElementById('slide-' + current);
  if (next) next.classList.add('active');
  document.querySelectorAll('.pdot')[current]?.classList.add('active');
  counter.textContent = padNum(current + 1) + ' / ' + padNum(TOTAL);

  elapsed = 0;
  circ.style.strokeDashoffset = 0;
  fill.style.width = '0%';

  // Trigger animated elements for each slide
  animateSlide(current);
}

function animateSlide(idx) {
  // Flow steps slide 3
  if (idx === 2) {
    const steps = document.querySelectorAll('.fstep');
    steps.forEach(s => s.classList.remove('v'));
    const te2 = document.querySelector('.te2');
    if (te2) { te2.style.opacity = '0'; te2.style.transform = 'translateY(14px)'; }
    setTimeout(() => {
      if (te2) { te2.style.transition = 'all .5s ease'; te2.style.opacity = '1'; te2.style.transform = 'translateY(0)'; }
      steps.forEach((s, i) => setTimeout(() => s.classList.add('v'), i * 160 + 100));
    }, 250);
  }
  // Constraints slide 7
  if (idx === 6) {
    const items = document.querySelectorAll('.citem');
    items.forEach(s => s.classList.remove('v'));
    setTimeout(() => items.forEach((s, i) => setTimeout(() => s.classList.add('v'), i * 110 + 100)), 300);
  }
  // Security slide 8
  if (idx === 7) {
    const items = document.querySelectorAll('.sitem');
    items.forEach(s => s.classList.remove('v'));
    setTimeout(() => items.forEach((s, i) => setTimeout(() => s.classList.add('v'), i * 90 + 100)), 300);
  }
}

function nextSlide() { goTo(current + 1); }
function prevSlide() { goTo(current - 1); }

function raf(ts) {
  if (!lastTs) lastTs = ts;
  elapsed += ts - lastTs; lastTs = ts;
  const p = Math.min(elapsed / DURATION, 1);
  circ.style.strokeDashoffset = C * p;
  fill.style.width = (p * 100) + '%';
  if (elapsed >= DURATION) { nextSlide(); lastTs = ts; }
  requestAnimationFrame(raf);
}

document.addEventListener('keydown', e => {
  if (e.key === 'ArrowRight' || e.key === ' ') nextSlide();
  if (e.key === 'ArrowLeft') prevSlide();
});

// Add transition styles to flow step fstep elements
document.querySelectorAll('.fstep').forEach((el, i) => {
  el.style.transition = `all 0.4s ${i * 0.05}s ease`;
});

goTo(0);
requestAnimationFrame(raf);
</script>
</body>
</html>
